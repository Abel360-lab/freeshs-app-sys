{% extends 'accounts/base.html' %}

{% block title %}My Applications - GCX Supplier Portal{% endblock %}

{% block page_title %}My Applications{% endblock %}
{% block page_subtitle %}Track and manage all your submitted applications{% endblock %}

{% block extra_css %}
<style>
    /* Page Header Modern */
    .page-header-modern {
        background: linear-gradient(135deg, rgba(26, 71, 42, 0.9) 0%, rgba(45, 90, 61, 0.9) 100%), 
                    url('/media/logo/Untitled-1.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        color: white;
        border-radius: var(--border-radius-lg);
        padding: 2rem;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
    }

    .page-header-modern::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 200px;
        height: 200px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        transform: translate(50%, -50%);
    }

    .page-header-modern::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 150px;
        height: 150px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 50%;
        transform: translate(-50%, 50%);
    }

    .header-content {
        position: relative;
        z-index: 2;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .header-info {
        flex: 1;
    }

    .header-title {
        font-size: 2rem;
        font-weight: 800;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .header-subtitle {
        font-size: 1.1rem;
        opacity: 0.9;
        margin-bottom: 1rem;
    }

    .breadcrumb-modern {
        background: rgba(255, 255, 255, 0.1);
        padding: 0.75rem 1rem;
        border-radius: var(--border-radius-sm);
        margin-top: 1rem;
    }

    .breadcrumb-modern a {
        color: white;
        text-decoration: none;
        opacity: 0.8;
    }

    .breadcrumb-modern a:hover {
        opacity: 1;
    }

    .breadcrumb-modern .active {
        color: white;
        opacity: 1;
    }

    .header-actions {
        display: flex;
        gap: 1rem;
        align-items: center;
    }

    .btn-header {
        padding: 0.75rem 1.5rem;
        border-radius: var(--border-radius-sm);
        font-weight: 600;
        font-size: 0.875rem;
        transition: all var(--transition);
        border: 2px solid white;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
    }

    .btn-header-primary {
        background: white;
        color: var(--gcx-primary);
    }

    .btn-header-primary:hover {
        background: rgba(255, 255, 255, 0.9);
        transform: translateY(-2px);
        box-shadow: var(--shadow);
    }

    .btn-header-outline {
        background: transparent;
        color: white;
    }

    .btn-header-outline:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-2px);
    }

    /* Filter Section */
    .filter-section {
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: var(--border-radius);
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-sm);
    }

    .filter-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
    }

    .filter-title {
        font-size: 1.125rem;
        font-weight: 700;
        color: var(--gray-900);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .filter-buttons {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }

    .filter-btn {
        padding: 0.5rem 1rem;
        border: 2px solid var(--gray-300);
        background: var(--white);
        color: var(--gray-700);
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        transition: all var(--transition);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .filter-btn:hover,
    .filter-btn.active {
        background: var(--gcx-primary);
        color: white;
        border-color: var(--gcx-primary);
        transform: translateY(-1px);
    }

    .filter-btn.active {
        box-shadow: 0 4px 12px rgba(26, 71, 42, 0.3);
    }

    /* Applications Grid */
    .applications-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .application-card-modern {
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: var(--border-radius);
        padding: 1.5rem;
        box-shadow: var(--shadow-sm);
        transition: all var(--transition);
        position: relative;
        overflow: hidden;
    }

    .application-card-modern::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        transition: all var(--transition);
    }

    .application-card-modern.pending::before {
        background: var(--warning);
    }

    .application-card-modern.approved::before {
        background: var(--success);
    }

    .application-card-modern.rejected::before {
        background: var(--danger);
    }

    .application-card-modern.under-review::before {
        background: var(--info);
    }

    .application-card-modern:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg);
        border-color: var(--gcx-primary);
    }

    .application-card-modern:hover::before {
        width: 6px;
    }

    .application-header {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        margin-bottom: 1rem;
    }

    .application-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--gray-900);
        margin-bottom: 0.25rem;
    }

    .application-tracking {
        font-size: 0.875rem;
        color: var(--gray-600);
        font-family: 'Courier New', monospace;
        background: var(--gray-100);
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        display: inline-block;
    }

    .application-status {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .status-pending {
        background: rgba(253, 126, 20, 0.1);
        color: #996300;
        border: 1px solid rgba(253, 126, 20, 0.2);
    }

    .status-approved {
        background: rgba(25, 135, 84, 0.1);
        color: #0f5132;
        border: 1px solid rgba(25, 135, 84, 0.2);
    }

    .status-rejected {
        background: rgba(220, 53, 69, 0.1);
        color: #842029;
        border: 1px solid rgba(220, 53, 69, 0.2);
    }

    .status-under-review {
        background: rgba(13, 202, 240, 0.1);
        color: #055160;
        border: 1px solid rgba(13, 202, 240, 0.2);
    }

    .application-meta {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-bottom: 1rem;
        padding: 1rem;
        background: var(--gray-50);
        border-radius: var(--border-radius-sm);
    }

    .meta-item {
        text-align: center;
    }

    .meta-label {
        font-size: 0.75rem;
        color: var(--gray-600);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 600;
        margin-bottom: 0.25rem;
    }

    .meta-value {
        font-size: 0.875rem;
        font-weight: 700;
        color: var(--gray-900);
    }

    .application-commodities {
        margin-bottom: 1rem;
    }

    .commodities-label {
        font-size: 0.875rem;
        color: var(--gray-600);
        font-weight: 600;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .commodities-list {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .commodity-badge {
        background: var(--gcx-accent);
        color: var(--gcx-primary);
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 600;
        border: 1px solid rgba(26, 71, 42, 0.2);
    }

    .application-progress {
        margin-bottom: 1.5rem;
    }

    .progress-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 0.5rem;
    }

    .progress-label {
        font-size: 0.875rem;
        color: var(--gray-600);
        font-weight: 600;
    }

    .progress-percentage {
        font-size: 0.875rem;
        font-weight: 700;
        color: var(--gcx-primary);
    }

    .progress-bar-modern {
        height: 8px;
        background: var(--gray-200);
        border-radius: 4px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--gcx-primary), var(--gcx-primary-light));
        border-radius: 4px;
        transition: width 0.6s ease-out;
    }

    .application-actions {
        display: flex;
        gap: 0.75rem;
    }

    .action-btn {
        flex: 1;
        padding: 0.75rem 1rem;
        border: none;
        border-radius: var(--border-radius-sm);
        font-size: 0.875rem;
        font-weight: 600;
        text-decoration: none;
        cursor: pointer;
        transition: all var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .action-btn-primary {
        background: linear-gradient(135deg, var(--gcx-primary), var(--gcx-primary-light));
        color: white;
    }

    .action-btn-primary:hover {
        background: linear-gradient(135deg, var(--gcx-primary-light), var(--gcx-primary-dark));
        transform: translateY(-2px);
        box-shadow: var(--shadow);
        color: white;
    }

    .action-btn-secondary {
        background: var(--white);
        color: var(--gcx-primary);
        border: 2px solid var(--gcx-primary);
    }

    .action-btn-secondary:hover {
        background: var(--gcx-primary);
        color: white;
    }

    .action-btn-warning {
        background: var(--warning);
        color: white;
    }

    .action-btn-warning:hover {
        background: #e55a00;
        transform: translateY(-2px);
        box-shadow: var(--shadow);
        color: white;
    }

    /* Empty State */
    .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-sm);
    }

    .empty-state-icon {
        width: 100px;
        height: 100px;
        background: var(--gray-100);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 2rem;
        font-size: 2.5rem;
        color: var(--gray-400);
    }

    .empty-state-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--gray-900);
        margin-bottom: 0.75rem;
    }

    .empty-state-description {
        color: var(--gray-600);
        margin-bottom: 2rem;
        max-width: 400px;
        margin-left: auto;
        margin-right: auto;
        line-height: 1.6;
    }

    /* Pagination */
    .pagination-modern {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        margin-top: 2rem;
    }

    .pagination-btn {
        padding: 0.75rem 1rem;
        border: 1px solid var(--gray-300);
        background: var(--white);
        color: var(--gray-700);
        border-radius: var(--border-radius-sm);
        font-size: 0.875rem;
        font-weight: 600;
        text-decoration: none;
        cursor: pointer;
        transition: all var(--transition);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .pagination-btn:hover {
        background: var(--gcx-primary);
        color: white;
        border-color: var(--gcx-primary);
    }

    .pagination-btn.active {
        background: var(--gcx-primary);
        color: white;
        border-color: var(--gcx-primary);
    }

    .pagination-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .pagination-btn:disabled:hover {
        background: var(--white);
        color: var(--gray-700);
        border-color: var(--gray-300);
    }

    /* Alert Modern */
    .alert-modern {
        border: none;
        border-radius: var(--border-radius);
        padding: 1.5rem;
        margin-bottom: 2rem;
        position: relative;
        border-left: 4px solid;
    }

    .alert-warning-modern {
        background: rgba(253, 126, 20, 0.1);
        color: #996300;
        border-left-color: var(--warning);
    }

    .alert-warning-modern .alert-icon {
        color: var(--warning);
    }

    /* Responsive */
    @media (max-width: 992px) {
        .applications-grid {
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        }
    }

    @media (max-width: 768px) {
        .page-header-modern {
            padding: 1.5rem;
        }

        .header-title {
            font-size: 1.5rem;
        }

        .header-subtitle {
            font-size: 1rem;
        }

        .header-content {
            flex-direction: column;
            align-items: flex-start;
        }

        .header-actions {
            width: 100%;
            flex-direction: column;
            align-items: stretch;
            gap: 0.75rem;
        }

        .btn-header {
            width: 100%;
            justify-content: center;
        }

        .applications-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .filter-buttons {
            justify-content: center;
        }

        .application-meta {
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }

        .application-actions {
            flex-direction: column;
        }

        .pagination-modern {
            flex-wrap: wrap;
        }

        .filter-section {
            padding: 1rem;
        }
    }

    @media (max-width: 480px) {
        .page-header-modern {
            padding: 1rem;
        }

        .header-title {
            font-size: 1.25rem;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .header-subtitle {
            font-size: 0.875rem;
        }

        .btn-header {
            font-size: 0.8rem;
            padding: 0.5rem 1rem;
        }

        .filter-btn {
            font-size: 0.75rem;
            padding: 0.375rem 0.75rem;
        }

        .application-card-modern {
            padding: 1rem;
        }

        .application-title {
            font-size: 1.125rem;
        }
    }

    /* Animations */
    .fade-in-up {
        animation: fadeInUp 0.6s ease-out;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .stagger-animation > * {
        animation: fadeInUp 0.6s ease-out;
    }

    .stagger-animation > *:nth-child(1) { animation-delay: 0.1s; }
    .stagger-animation > *:nth-child(2) { animation-delay: 0.2s; }
    .stagger-animation > *:nth-child(3) { animation-delay: 0.3s; }
    .stagger-animation > *:nth-child(4) { animation-delay: 0.4s; }
    .stagger-animation > *:nth-child(5) { animation-delay: 0.5s; }
    .stagger-animation > *:nth-child(6) { animation-delay: 0.6s; }
</style>
{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="page-header-modern fade-in-up">
    <div class="header-content">
        <div class="header-info">
            <h1 class="header-title">
                <i class="fas fa-file-alt"></i>
                My Applications
            </h1>
            <p class="header-subtitle">
                Track and manage all your submitted applications
            </p>
            <nav class="breadcrumb-modern" aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="{% url 'accounts:dashboard' %}">Dashboard</a></li>
                    <li class="breadcrumb-item active">Applications</li>
                </ol>
            </nav>
        </div>
        <div class="header-actions">
            <a href="{% url 'applications:application-form' %}" class="btn-header btn-header-primary">
                <i class="fas fa-plus"></i>New Application
            </a>
            <!-- <a href="{% url 'applications:supplier-general-document-upload' %}" class="btn-header btn-header-outline">
                <i class="fas fa-cloud-upload-alt"></i>Upload Documents
            </a> -->
        </div>
    </div>
</div>

<!-- Account Status Notice -->
{% if not user.is_active %}
<div class="alert-modern alert-warning-modern fade-in-up">
    <div class="d-flex align-items-start gap-3">
        <div class="alert-icon">
            <i class="fas fa-exclamation-triangle fa-lg"></i>
        </div>
        <div>
            <h6 class="alert-heading mb-2">Account Pending Activation</h6>
            <p class="mb-0">
                Your account is currently pending activation by the admin. You can monitor applications and upload documents, but some features may be limited.
            </p>
        </div>
    </div>
</div>
{% endif %}

<!-- Filter Section -->
<div class="filter-section fade-in-up">
    <div class="filter-header">
        <div class="filter-title">
            <i class="fas fa-filter"></i>
            Filter Applications
        </div>
    </div>
    <div class="filter-buttons">
        <button class="filter-btn active" data-filter="all">
            <i class="fas fa-list"></i>All ({{ applications|length }})
        </button>
        <button class="filter-btn" data-filter="pending">
            <i class="fas fa-clock"></i>Pending <span class="filter-count" data-status="pending">0</span>
        </button>
        <button class="filter-btn" data-filter="approved">
            <i class="fas fa-check-circle"></i>Approved <span class="filter-count" data-status="approved">0</span>
        </button>
        <button class="filter-btn" data-filter="rejected">
            <i class="fas fa-times-circle"></i>Rejected <span class="filter-count" data-status="rejected">0</span>
        </button>
        <button class="filter-btn" data-filter="under-review">
            <i class="fas fa-search"></i>Under Review <span class="filter-count" data-status="under-review">0</span>
        </button>
    </div>
</div>

<!-- Applications List -->
{% if applications %}
<div class="applications-grid stagger-animation">
    {% for application in applications %}
    <div class="application-card-modern {{ application.status|lower }}" data-status="{{ application.status|lower }}">
        <div class="application-header">
            <div>
                <h3 class="application-title">{{ application.business_name }}</h3>
                <div class="application-tracking">{{ application.tracking_code }}</div>
            </div>
            <span class="application-status status-{{ application.status|lower }}">
                {{ application.get_status_display }}
            </span>
        </div>

        <div class="application-meta">
            <div class="meta-item">
                <div class="meta-label">Submitted</div>
                <div class="meta-value">{{ application.created_at|date:"M d, Y" }}</div>
            </div>
            <div class="meta-item">
                <div class="meta-label">Last Updated</div>
                <div class="meta-value">{{ application.updated_at|date:"M d, Y" }}</div>
            </div>
        </div>

        <div class="application-commodities">
            <div class="commodities-label">
                <i class="fas fa-seedling"></i>
                Commodities to Supply
            </div>
            <div class="commodities-list">
                {% for commodity in application.commodities_to_supply.all %}
                    <span class="commodity-badge">{{ commodity.name }}</span>
                {% empty %}
                    <span class="text-muted">No commodities specified</span>
                {% endfor %}
            </div>
        </div>

        <div class="application-progress">
            <div class="progress-header">
                <div class="progress-label">Document Progress</div>
                <div class="progress-percentage">75%</div>
            </div>
            <div class="progress-bar-modern">
                <div class="progress-fill" style="width: 75%"></div>
            </div>
        </div>

        <div class="application-actions">
            <a href="{% url 'applications:supplier-application-detail' application.id %}" 
               class="action-btn action-btn-primary">
                <i class="fas fa-eye"></i>View Details
            </a>
            {% if application.status == 'pending_review' or application.status == 'under_review' %}
            <a href="{% url 'applications:supplier-document-upload' application.id %}" 
               class="action-btn action-btn-warning">
                <i class="fas fa-upload"></i>Upload Docs
            </a>
            {% else %}
            <a href="{% url 'applications:supplier-document-upload' application.id %}" 
               class="action-btn action-btn-secondary">
                <i class="fas fa-file-upload"></i>Manage Docs
            </a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

<!-- Pagination -->
{% if applications.has_other_pages %}
<div class="pagination-modern fade-in-up">
    {% if applications.has_previous %}
        <a href="?page=1" class="pagination-btn">
            <i class="fas fa-angle-double-left"></i>First
        </a>
        <a href="?page={{ applications.previous_page_number }}" class="pagination-btn">
            <i class="fas fa-angle-left"></i>Previous
        </a>
    {% else %}
        <span class="pagination-btn" disabled>
            <i class="fas fa-angle-double-left"></i>First
        </span>
        <span class="pagination-btn" disabled>
            <i class="fas fa-angle-left"></i>Previous
        </span>
    {% endif %}
    
    <span class="pagination-btn active">
        Page {{ applications.number }} of {{ applications.paginator.num_pages }}
    </span>
    
    {% if applications.has_next %}
        <a href="?page={{ applications.next_page_number }}" class="pagination-btn">
            Next<i class="fas fa-angle-right"></i>
        </a>
        <a href="?page={{ applications.paginator.num_pages }}" class="pagination-btn">
            Last<i class="fas fa-angle-double-right"></i>
        </a>
    {% else %}
        <span class="pagination-btn" disabled>
            Next<i class="fas fa-angle-right"></i>
        </span>
        <span class="pagination-btn" disabled>
            Last<i class="fas fa-angle-double-right"></i>
        </span>
    {% endif %}
</div>
{% endif %}

{% else %}
<!-- Empty State -->
<div class="empty-state fade-in-up">
    <div class="empty-state-icon">
        <i class="fas fa-file-alt"></i>
    </div>
    <h3 class="empty-state-title">No Applications Found</h3>
    <p class="empty-state-description">
        You haven't submitted any applications yet. Get started by submitting your first application to become a GCX supplier.
    </p>
    <a href="{% url 'applications:application-form' %}" class="btn btn-primary-modern btn-modern">
        <i class="fas fa-plus me-2"></i>Submit New Application
    </a>
</div>
{% endif %}
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Debug: Log all application statuses
    const applicationCards = document.querySelectorAll('.application-card-modern');
    console.log('Found', applicationCards.length, 'application cards');
    applicationCards.forEach((card, index) => {
        const status = card.getAttribute('data-status');
        const className = card.className;
        console.log(`Card ${index + 1}: data-status="${status}", class="${className}"`);
    });
    
    // Count applications by status
    function updateFilterCounts() {
        const counts = {
            'pending': 0,
            'approved': 0,
            'rejected': 0,
            'under-review': 0
        };
        
        applicationCards.forEach(card => {
            const status = card.getAttribute('data-status');
            if (status === 'pending' || status === 'pending_review') {
                counts['pending']++;
            } else if (status === 'under_review' || status === 'under-review') {
                counts['under-review']++;
            } else if (status === 'approved') {
                counts['approved']++;
            } else if (status === 'rejected') {
                counts['rejected']++;
            }
        });
        
        // Update filter button counts
        Object.keys(counts).forEach(status => {
            const countElement = document.querySelector(`.filter-count[data-status="${status}"]`);
            if (countElement) {
                countElement.textContent = `(${counts[status]})`;
            }
        });
        
        console.log('Filter counts:', counts);
    }
    
    // Initialize filter counts
    updateFilterCounts();
    
    // Filter functionality
    const filterButtons = document.querySelectorAll('.filter-btn');
    
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            const filterValue = this.getAttribute('data-filter');
            
            // Update active button
            filterButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            // Filter cards
            applicationCards.forEach(card => {
                if (filterValue === 'all') {
                    card.style.display = 'block';
                    card.style.animation = 'fadeInUp 0.4s ease-out';
                } else {
                    const status = card.getAttribute('data-status');
                    console.log('Filtering:', filterValue, 'Card status:', status); // Debug log
                    
                    // Handle different status mappings
                    let shouldShow = false;
                    switch(filterValue) {
                        case 'pending':
                            shouldShow = status === 'pending' || status === 'pending_review' || status === 'pending_review';
                            break;
                        case 'under-review':
                            shouldShow = status === 'under_review' || status === 'under-review' || status === 'under_review';
                            break;
                        case 'approved':
                            shouldShow = status === 'approved' || status === 'approved';
                            break;
                        case 'rejected':
                            shouldShow = status === 'rejected' || status === 'rejected';
                            break;
                        default:
                            shouldShow = status === filterValue;
                    }
                    
                    if (shouldShow) {
                        card.style.display = 'block';
                        card.style.animation = 'fadeInUp 0.4s ease-out';
                    } else {
                        card.style.display = 'none';
                    }
                }
            });
        });
    });

    // Animate progress bars
    const progressBars = document.querySelectorAll('.progress-fill');
    progressBars.forEach(bar => {
        const width = bar.style.width;
        bar.style.width = '0%';
        setTimeout(() => {
            bar.style.width = width;
        }, 500);
    });

    // Add hover effects to cards
    applicationCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-4px)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });

    // Smooth scroll for pagination
    document.querySelectorAll('.pagination-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            if (!this.hasAttribute('disabled')) {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
        });
    });
});
</script>
{% endblock %}